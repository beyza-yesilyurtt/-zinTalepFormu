
@model List<Form>

<div class="row justify-content-center">
	<div class="col-6 text-center">
		<h2 class="font-weight-bold" style="font-size: 3.5em;">İzinler Listesi</h2>
	</div>
</div>

<br />
<br />

	<table class=" table table-striped table-hover">
		<thead>

			<tr>
				<th> İsim</th>
				<th> Soyisim</th>
				<th> Mail</th>
				<th> İzin Başlangıç Tarihi</th>
				<th> İzin Bitiş Tarihi</th>
				<th> İzin Nedeni</th>
			<th> İzin Süresi</th>
			</tr>
		</thead>

		<tbody>
			@foreach (var Form in Model)
			{
				<tr>
					<td>@Form.Name</td>
					<td>@Form.Surname</td>
					<td>@Form.Mail</td>
					<td>@Form.PermissionStartDate</td>
					<td>@Form.PermissionEndDate</td>
					<td>@Form.PermissionReason</td>
					
				<td id="startDate_@Form.Id" style="display: none;">@Form.PermissionStartDate</td>
				<td id="endDate_@Form.Id" style="display: none;">@Form.PermissionEndDate</td>
				<td>@Form.PermissionReason</td>
				<td>
					<span id="dateDifferenceResult_@Form.Id"></span>
					<script>
						var startDate = new Date(document.getElementById('startDate_@Form.Id').innerText);
						var endDate = new Date(document.getElementById('endDate_@Form.Id').innerText);
						var resultId = 'dateDifferenceResult_' + '@Form.Id';

						if (!isNaN(startDate.getTime()) && !isNaN(endDate.getTime())) {
							var difference = endDate - startDate;
							var daysDifference = Math.floor(difference / (1000 * 60 * 60 * 24));
							document.getElementById(resultId).innerText = daysDifference;
						} else {
							document.getElementById(resultId).innerText = 'Geçersiz tarih formatı!';
						}
					</script>
					</td>
				</tr>
			}
		</tbody>
	</table>
	<br />
	<br />
<div class="col-6">
	<a asp-controller="Form" asp-action="CreateForm" class="btn btn-outline-primary btn-block">Yeni Form Oluştur</a>
</div>
</div>
</>


<script>
	function calculateDateDifference() {
		var startDate = new Date(document.getElementById('PermissionStartDate').value);
		var endDate = new Date(document.getElementById('PermissionEndDate').value);

		if (!isNaN(startDate.getTime()) && !isNaN(endDate.getTime())) {
			var difference = endDate - startDate;
			var daysDifference = Math.floor(difference / (1000 * 60 * 60 * 24));

			document.getElementById('dateDifferenceResult').innerText = 'İki tarih arasındaki gün farkı: ' + daysDifference + ' gün.';
		} else {
			document.getElementById('dateDifferenceResult').innerText = 'Geçersiz tarih formatı!';
		}
	}
</script>


